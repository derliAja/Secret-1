(function(){var n="0.1.34",t,a="undefined",e=25,r=parseInt(1e3/e),i=t,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"501",instanceID:"externalConf###Instanceid"},c=function(n){return typeof n!==a},u="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=c(window[u])&&1==window[u];var f=function(){return s.instanceID},d="_HistatsCounterGraphics_",l,h=function(){return d+s.counterID},A=function(n){return!("string"!=typeof n||""==n)},v=function(){try{s.DEBUG_MODE&&c(console)&&console.log.apply(this,arguments)}catch(n){}},g=function(a,e){var o=a||{};try{var u=function(n){var t="autostart";return"undefined"!=typeof n[t]&&n[t]===!0},f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:u(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},d=function(){return f.INSTANCE_ID},A=100,g=1,m=function(){return e.document},b=function(n){return c(n)&&!!m().getElementById(n)},p=function(n){i=e.setTimeout(n,r)},w=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||p,C=e["Date"]||{},I=function(n,t){for(var a in n)t.hasOwnProperty(a)&&(t[a]=n[a])};o.getInstanceID=d;var T=h();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=T,o.$window=e;var S=function(n){return b(n)?m().getElementById(n):t},x={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},N={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:t,customization:{}},y={domCanvasObject:null,canvas2dContext:null,canvasProperties:x},B=function(){var n={},a=n.hasOwnProperty,e=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(t){return a.call(n,t)},s=function(t){return i.printMessages&&console.log(d(),"addTopic",t),r++,i.topicsCount++,r>50&&v(d(),"Lot of topics registered!",t),n[t]=[]},c=function(t){return n[t]},u=function(t,a,r){i.printMessages&&console.log(d(),"subscribe",t,a,r),i.recordMessages&&i.messageLog.push(["subscribe",t,a,r]),r=r||A,o(t)||s(t);var u=c(t).push({callback:a,priority:a})-1;return e++,i.subscribersCount++,e>50&&v(d(),"Lot of topics registered!",t),{remove:function(){delete n[t][u]}}},f=function(n,t){var a="no-topic-found";n!=a&&l(a,{topic:n,info:t})},l=function(a,e){return i.messagePassedCount++,i.printMessages&&console.log(d(),"publish",a,e),i.recordMessages&&i.messageLog.push(["publish",a,e]),i.blockMessages?void 0:o(a)?(n[a].slice().sort(function(n,t){return n.priority-t.priority}).forEach(function(n){n.callback(e!=t?e:{})}),void 0):(f(a,e),void 0)},h=function(n,t){w(function(){l(n,t)})};return{subscribe:u,publish:l,publishAsync:h,debugObj:i}}(),O=function(){return s.counterID},R=function(){var n="siteId";return o[n]=o[n]||0},P=function(){var n="main_div_name";return o[n]||"histats_counter_"+R()+"_"+O()},_=[],E=function(){return l=P(),l},D=function(){return E()+"_canvas"},k=function(){return"http://www.histats.com/viewstats/?sid="+R()+"&ccid="+O()},F=function(){e.location=k()},L=function(){if(1==y.canvasProperties.doMouseOverOut){var n=W().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}W().domCanvasObject.style.cursor="pointer"},M=function(){if(1==y.canvasProperties.doMouseOverOut){var n=W().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},U=function(){var n=W(),t=n.canvasProperties,a=n.canvas2dContext;a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,a.shadowBlur=t.shadowBlur,a.shadowColor="rgba(0,0,0,0.2)"},Q=function(){return S(E())},G=function(){var n=!!Q();return n},V=function(){try{if(!G())return B.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=Q(),t=W().canvasProperties,a='<canvas id="'+D()+'" width="'+t.w+'" height="'+t.h+'" ></canvas>',r='<a href="'+k()+'" target="_blank">'+a+"</a>";n.innerHTML=r,W().domCanvasObject=S(D());var i=W().domCanvasObject;W().canvas2dContext=i.getContext("2d"),"addEventListener"in e?(i.addEventListener("mouseover",function(){L()}),i.addEventListener("mouseout",function(){M()})):i.onclick=function(){F()}}catch(o){v(d(),"drawCanvas",o)}},K=function(){try{if(f.ANIMATION_STARTED)return;if(f._STOPPED)return;B.publish("draw-callback-requested-reconfiguration",{}),B.publish("starting_pre",{context:o}),f.ANIMATION_STARTED=!0,B.publish("started",{context:o}),B.publish("drawcanvas_pre",{context:o}),V(),B.publish("drawcanvas_post",{context:o}),j(),B.publish("animationLoop_started",{context:o})}catch(n){v(d(),"startNow",n,n.message)}},H=function(n,t,a){t.addEventListener?t.addEventListener(n,a,!1):t.attachEvent?t.attachEvent("on"+n,a):t[n]=a},q=function(){try{B.publish("appendedStart",{context:o,type:"animFrame"}),w(K)}catch(n){v(d(),"startAsap",n.message,n)}},X=function(n,t){_.push({name:n,callback:t})},J=function(){},z=function(){_.forEach(function(n){n.callback(o.getCanvas2dContext(),N,W())})},Y=function(){c(i)&&e.clearTimeout(i)},j=function(){f._STOPPED||w(function(){tn(z),f.ANIMATION_RUNNING_STATUS&&j()})};B.subscribe("setAnimationProperties",function(n){I(n,N)}),B.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){_.push({name:n.name,callback:n.cb,priority:n.priority})}),_=_.slice().sort(function(n,t){return n.priority-t.priority})}catch(t){v(d(),"animationLoop",t.message,t)}}),B.subscribe("configuration-changed",function(n){_=[],B.publish("draw-callback-requested-reconfiguration",{})});var Z=function(n){var t=n!=f.ANIMATION_RUNNING_STATUS;return t&&(0==f.ANIMATION_RUNNING_STATUS&&1==n,1==f.ANIMATION_RUNNING_STATUS&&0==n&&Y(),f.ANIMATION_RUNNING_STATUS=n),t},W=function(){return y},$=function(){var n=!1;0==N.frameCounter&&B.publish("FIRST-FRAME",{});var t=C.now(),a=t-N.msLastFrameDrawn;if(a>N.msPerFrame){var e=a%N.msPerFrame;N.msLastFrameDrawn=t-e,n=!0}return n},nn=function(){if(!(N.animation_duration_inFrames<1)){var n=N.animation_duration_inFrames+N.waitframesBetweenTwoAnimations;N.currentLoopFrame=N.frameCounter%n;var t=0==N.currentLoopFrame,a=N.currentLoopFrame>=N.animation_duration_inFrames;t&&(N.isInAnimationTransition=!0,B.publish("drawing-triggered-animation-start",N)),a&&N.isInAnimationTransition&&(N.isInAnimationTransition=!1,B.publish("drawing-triggered-animation-end",N))}},tn=function(n){var t=$();t&&(N.frameCounter++,nn(),n())},an=function(n){return n(o.getCanvas2dContext())},en=function(){var n=17,t=2,a=1,e=W().canvasProperties,r=0;e.hasShadow&&(r=r+t+a),e.hasLabel&&(e.h=e.h+n),e.w=e.w+r,e.h=e.h+r},rn=function(n){I(n,W().canvasProperties),en()};B.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var t=W().canvasProperties;n.clearRect(0,0,t.w,t.h),t.hasShadow&&U()})};B.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,t){W().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},cn=function(n,a){a.autoTriggerTextChange_onFrame!==t&&a.currentLoopFrame==a.autoTriggerTextChange_onFrame&&B.publish("drawing-change-text",{})},un=function(n){B.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:cn,priority:5,name:"autoUpdateText"}]})};B.subscribe("draw-callback-requested-reconfiguration",un,15),o.__CODE_VERSION=n,o.getCanvasObject=W,o.getCanvas2dContext=function(){return W().canvas2dContext},o.onCanvas2dContext=an,o.getXYCanvas=function(){return{x:W().canvasProperties.xBase,y:W().canvasProperties.yBase}},o.addDrawCallback=X,o.getCanvasProperties=function(){return W().canvasProperties},o.setCanvasProperties=function(n){for(var t in n)n.hasOwnProperty(t)&&(y.canvasProperties[t]=n[t])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(W().canvasProperties))},o.getAnimationFrames=function(){return N.frameCounter},o.getAnimationControl=function(){return N},o.setAnimationControl=function(n){for(var t in n)n.hasOwnProperty(t)&&(N[t]=n[t])},o.start=q,o.changeRunningStatus=Z,o.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},o.eventBus=B,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.bars={},a=!1,e=3,r=1,i=0,o=[2,5,10];n.eventBus.subscribe("set-bars-params",function(t){f(t),n.eventBus.publish("configuration-changed",{})});var s=[],c={xBase:5,yBase:13,hMin:2,hMax:10,w:4,barsColours:[["#3e8bfd","#2572e4"],["#feb23f","#dc901d"],["#d83f3f","#b41b1b"]],parent:n},u=function(){return c},f=function(n){for(var t in n)n.hasOwnProperty(t)&&(c[t]=n[t])},d=function(n){a=!0;for(var t=0;e>t;t++)n.push({x:t*(c.w+1),y:0,width:c.w,height:o[t],animateDirection:r,gradient:null,gradientStart:c.barsColours[t][0],gradientEnd:c.barsColours[t][1]})},l=function(t){var a=.5,e=t.height,o=n.getXYCanvas();t.animateDirection==r&&e>=c.hMax?t.animateDirection=i:t.animateDirection==i&&e<=c.hMin&&(t.animateDirection=r),e+=a*(t.animateDirection==r?1:-1),t.y=c.yBase-e+o.y,t.height=e},h=function(t){return function(a){var e=n.getXYCanvas();a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.beginPath(),a.fillStyle=g(t,a),a.fillRect(e.x+c.xBase+t.x,t.y,t.width,t.height)}},A=function(t){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:v,priority:20,name:"bars_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",A,11);var v=function(){a||d(s);for(var t in s)if(s.hasOwnProperty(t)){var e=s[t];l(e),n.onCanvas2dContext(h(e))}},g=function(t,a){var e=n.getXYCanvas(),r=c.xBase,i=a.createLinearGradient(r+t.x+e.x,t.y,r+t.x+t.width,t.height+t.y);return i.addColorStop(0,t.gradientStart),i.addColorStop(1,t.gradientEnd),i};t.getBoxProperties=u,t.setBoxProperties=f,t.transformBarsColour=function(n){barsColours=n(c.barsColours)},t.draw=v}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.effectLightLine={},a=function(n,t){e.colorStops.push({position:n,colour:t})},e={x:0,y:0,width:0,height:0,colorStops:[]},r=function(n){var t=n.createLinearGradient(e.x,e.y,e.x+e.width,e.y);e.colorStops.forEach(function(n){t.addColorStop(n.position,n.colour)}),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height)};t.addColorStop=a,t.draw=r,t.getProperties=function(){return e},t.setProperties=function(n,t,a,r){e.x=n,e.y=t,e.width=a,e.height=r}}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a={main:"",source:t,loaded:!1};a.main="data:image/png;base64,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";var e=function(t){var e=a.source=new Image;e.onload=function(){a.loaded=!0,n.eventBus.publish("background-image-loaded",a),n.eventBus.publish("configuration-changed",{})},e.src=a.main};n.eventBus.subscribe("FIRST-FRAME",e,5),n.image_base64_src=a}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.counter={};a.ID="501",a.properties={w:95,h:16,hasShadow:!0};var e=!1,r={backgroundImageObject:t},i={xBase:4,yBase:13,barsColours:[["#8ab9fd","#117ae3"],["#fec745","#eb8a26"],["#76fd1c","#3db31c"]]},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110};n.eventBus.publish("setCanvasProperties",a.properties),n.eventBus.publish("setAnimationProperties",o),n.eventBus.publish("set-bars-params",i);var s={light:{x:0,y:0,w:10,h:16,movementsPerFrame:1,xStart:0,xEnd:85}},c=function(n){var t=s;t.light.movementsPerFrame=(s.light.xEnd-s.light.xStart)/o.animation_duration_inFrames};c(o.animation_duration_inFrames);var u=function(t){var a=s,e=n.getXYCanvas();a.light.x+=a.light.movementsPerFrame;var r=t.createLinearGradient(e.x+a.light.x,e.y+a.light.y,e.x+a.light.x+a.light.w,e.y+a.light.y);r.addColorStop(0,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(e.x+a.light.x,e.y+a.light.y,a.light.w,a.light.h)},f=function(t,a){n.eventBus.publish("clear-canvas-rectangle",{});var e=n.getXYCanvas();t.drawImage(r.backgroundImageObject.source,e.x,e.y)},d=function(n,t){var a=s;t.isInAnimationTransition?u(n):a.light.x=a.light.xStart},l=function(a){r.backgroundImageObject!=t&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:f,priority:10,name:"drawBackground"},{cb:d,priority:17,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",l,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),f.AUTOSTART&&o.start()}catch(fn){}return o},m="base.js",b=window,p="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=c(window[p])&&window[p]===!0,window[h()]=g,window["histats_canvascounters_"+m]=g}).call(this);